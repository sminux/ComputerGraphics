<HTML>
    <head>
      <title>
         Second lab.
         Y-buffer
      </title>
    </head>
    
<body>
    <script>
	function makeDot(ctx, x, y)
	{ ctx.fillRect(x, y, 2, 2); }
	
	function makeLine(ctx, x0, y0, x1, y1)
	{
	   var temp;
	   var d = 2*b -a;
	   var x = 0;
  	   var y = 0;
	   var a, b, xn, yn;

	if(Math.abs(y1-y0) <= Math.abs(x1-x0)) temp = 1; else temp = -1;
	   
	if (temp)
	{
	   var a = Math.abs(x1-x0);
	   var b = Math.abs(y1-y0);
	   if (x0<=x1){ xn=x0; yn=y0;} else { xn=x1; yn=y1; if(y1-y0 < 0) dy=-1;}
	}else{
	   var a = Math.abs(y1-y0);
	   var b = Math.abs(x1-x0);
	   if (x0<=x1){ xn=x0; yn=y0;} else { xn=x1; yn=y1; if(x1-x0 < 0) dy=-1;}
	      }

	   
	for (x=0; x<a; x++)
		{
		if (d>=0){
                    x = x +1;
                    y = y + 1;
                    d = d + 2*(b-a);
 			    } else
			{
                x = x +1;
                y = y + 1;
			    d = d + 2*b;  
			}
		if(temp) makeDot(ctx, x, y);
		else makeDot(ctx, y, x);
		}
 	  }

		/*class point(x, y)
		{
			this.x = x;
			this.y = y;
		}*/
    </script>
  
    <canvas id="lab2" width="500" height="500">
        <script>
        var canvas = document.getElementById("lab2");
        var ctx = canvas.getContext('2d');
        //int pangle = int[];
        function onClick()
        {
           if(event.button == 0)
            {
                var x = event.offsetX;
                var y = event.offsetY;
                makeDot(ctx, x, y);
                //pangle.push(point);
                //pangle++
            }
            if(event.button == 1)
            {
                var x = event.offsetX;
                var y = event.offsetY;
                var color = ctx.getImageData(x, y, 1, 1).data[3];
                alert("color="+color);
                makeLine(ctx, 0, 0, x, y);
            }
        }

        canvas.addEventListener("click", onClick);
        </script>
      </canvas>
       
  </body> 
</HTML>
  