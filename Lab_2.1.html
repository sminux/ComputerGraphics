<HTML>
    <head>
      <title>
         Second lab.
         Y-buffer
      </title>
    </head>
    
<body>
    <script>

        function makeLine(ctx, x0, y0, x1, y1)
        {
           var temp;
           var d = 2*b -a;
           var x = x0, y = y0;
           var a, b, dx = 0, dy =0;

        if (Math.abs(y1-y0) <= Math.abs(x1-x0))
        {
           var a = Math.abs(x1-x0);
           var b = Math.abs(y1-y0);
           if (x1-x0<0)&&(y1-y0<0){
               dx = -1;
               dy = -1;
           } 
            else if(x1-x0<0)&&(y1-y0>0){
                dx = -1;
                dy = 1;
            }
            else if(x1-x0>0)&&(y1-y0>0){
                dx = 1;
                dy = 1;
            }
            else if(x1-x0>0)&&(y1-y0>0){
                dx = 1;
                dy = -1;
            }
        }else{
           var a = Math.abs(y1-y0);
           var b = Math.abs(x1-x0);              
            if (x1-x0<0)&&(y1-y0<0){
               dx = -1;
               dy = -1;
           } 
            else if(x1-x0<0)&&(y1-y0>0){
                dx = 1;
                dy = -1;
            }
            else if(x1-x0>0)&&(y1-y0>0){
                dx = 1;
                dy = 1;
            }
            else if(x1-x0>0)&&(y1-y0>0){
                dx = -1;
                dy = 1;
            }
        }

            
        for (x; x<a; x++)
            {
            if (d>=0){
                        x = x + dx;
                        y = y + dy;
                        d = d + 2*(b-a);
                    } else
                        {
                            x = x + dx;
                            d = d + 2*b;  
                        }
            ctx.fillRect(x, y, 1, 1);
            }
          }

		/*class point(x, y)
		{
			this.x = x;
			this.y = y;
		}*/
    </script>
  
    <canvas id="lab2" width="500" height="500">
        <script>
        var canvas = document.getElementById("lab2");
        var ctx = canvas.getContext('2d');
        function onClick()
        {
           if(event.button == 0)
            {
                var x0 = event.offsetX;
                var y0 = event.offsetY;
                ctx.fillRect(x0, y0, 3, 3);
            }
            if(event.button == 1)
            {
                var x1 = event.offsetX;
                var y1 = event.offsetY;
                makeLine(ctx, 0, 0, x1, y1);
            }
        }

        canvas.addEventListener("click", onClick);
        </script>
      </canvas>
       
  </body> 
</HTML>
  